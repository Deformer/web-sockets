
nginx:
  build: ./nginx
  links:
    - server-john
    - server-paul
    - server-george
    - server-ringo
  ports:
   - "3000:80"

emiter:
  build: ./emiter
  links:
    - redis
  expose:
    - "3000"

server-john:
  build: ./server
  links:
    - redis
  expose:
    - "3000"
  environment:
    - NAME=John

server-paul:
  build: ./server
  links:
    - redis
  expose:
    - "3000"
  environment:
    - NAME=Paul

server-george:
  build: ./server
  links:
    - redis
  expose:
    - "3000"
  environment:
    - NAME=George

server-ringo:
  build: ./server
  links:
    - redis
  expose:
    - "3000"
  environment:
    - NAME=Ringo

redis:
  image: redis:alpine
  expose:
    - "6379"
  ports:
    - 6379:6379
